name: "Wood's MRD25GW"
product_id:
  - mgg4xziqqrzuozwv

primary_entity:
  entity: humidifier
  class: dehumidifier
  name: "Dehumidifier"
  icon: "mdi:water-off"
  dps:
    # Power
    - id: 1
      name: switch
      type: boolean

    # Target humidity (your device exposes presets "40" and "50")
    # We map those enum strings to numeric setpoints so HA shows 40%/50%.
    - id: 3
      name: humidity
      type: string
      mapping:
        - dps_val: "40"
          value: 40
        - dps_val: "50"
          value: 50

    # Fan speed as mode (Low/High)
    - id: 4
      name: mode
      type: string
      mapping:
        - dps_val: low
          value: Low
        - dps_val: high
          value: High

    # Fault bitfield (kept hidden on the main entity; exposed below as a problem sensor)
    - id: 19
      name: error
      type: bitfield
      hidden: true

secondary_entities:
  # Current humidity measurement
  - entity: sensor
    name: "Current humidity"
    class: humidity
    dps:
      - id: 6
        name: sensor
        type: integer
        unit: "%"
        class: measurement

  # Swing flap
  - entity: switch
    name: "Swing"
    icon: "mdi:unfold-more-horizontal"
    dps:
      - id: 8
        name: switch
        type: boolean

  # Child lock
  - entity: lock
    name: "Child lock"
    category: config
    dps:
      - id: 16
        name: lock
        type: boolean

  # Fault / Tank / Error indicator (true if any bit set)
  - entity: binary_sensor
    name: "Dehumidifier fault"
    class: problem
    category: diagnostic
    dps:
      - id: 19
        name: sensor
        type: bitfield
        mapping:
          - dps_val: 0
            value: false
          - value: true
